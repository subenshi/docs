---
sidebar_position: 5
---

# Foundation

> Rules that drives the blueprint.

## Communication contracts

All messages exchanged between microservices follow the same format. The message is a JSON object with the following structure:

```json
{
  "uuid": "string",           // Unique identifier for this particular message
  "timestamp": "string",      // Timestamp of when the message was created
  "application": {            // Application information
    "from": "string",         // Name of the application that sent the message
    "to": "string"            // Name of the application that should receive the message
  },
  "payload": {  },            // Message payload
  "original": {               // Original message that triggered this message's flow
    "uuid": "string",         // Unique identifier for the original message
    "application": "string",  // Name of the application that sent the original message
    "timestamp": "string"     // Timestamp of when the original message was created
    "*": "*",                 // Additional fields from the original message
  }
}
```

### Requests from API Gateway to microservices

- All requests generated by API Gateway to microservices follow the communication contract, with the following payload structure:

```json
{
  "payload": {
    "url": "string",          // URL
    "method": "string",       // HTTP method
    "query": {},              // Query parameters
    "body": {}                // Request body
    "headers": {},            // HTTP headers
    "user": {}                // User information
  }
}
```

### Replies back to API Gateway's requests

- All responses generated by microservices that replies to API Gateway requests must follow the communication contract, with the following payload structure:

```json
{
  "payload": {
    "code": Number,           // HTTP status code
    "data": {}                // Data to be sent to the client
  }
}
```

## Code templates

- By following the communication contract, all microservices are compatible with each other.
- They are designed and coded to be as generic as possible, so they can be reused in other projects.
- They are designed to be as simple as possible, so they can be easily understood and modified.

## Graceful shutdowns

- All microservices implements a graceful shutdown mechanism.